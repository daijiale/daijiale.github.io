
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>【PHP】高级特性以及设计模式归纳 | DaiJiale&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Jiale Dai">
    

    
    <meta name="description" content="PS：之前在和Mentor一起开发新项目时候，接触到了一些很经典的PHP设计模式和高级特性，通过项目沉淀和业余时间的学习，想对常用设计模式进行一个归纳，进行新知识的梳理，方便服务于未来更大型的后端项目，以及帮助更多的PHPer上路。">
<meta property="og:type" content="article">
<meta property="og:title" content="【PHP】高级特性以及设计模式归纳">
<meta property="og:url" content="http://daijiale.github.io/2016/09/29/【PHP】高级特性以及设计模式归纳/index.html">
<meta property="og:site_name" content="DaiJiale's Blog">
<meta property="og:description" content="PS：之前在和Mentor一起开发新项目时候，接触到了一些很经典的PHP设计模式和高级特性，通过项目沉淀和业余时间的学习，想对常用设计模式进行一个归纳，进行新知识的梳理，方便服务于未来更大型的后端项目，以及帮助更多的PHPer上路。">
<meta property="og:image" content="http://7xi6qz.com1.z0.glb.clouddn.com/YIIsudu.jpg">
<meta property="og:updated_time" content="2016-12-05T10:39:39.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="【PHP】高级特性以及设计模式归纳">
<meta name="twitter:description" content="PS：之前在和Mentor一起开发新项目时候，接触到了一些很经典的PHP设计模式和高级特性，通过项目沉淀和业余时间的学习，想对常用设计模式进行一个归纳，进行新知识的梳理，方便服务于未来更大型的后端项目，以及帮助更多的PHPer上路。">
<meta name="twitter:image" content="http://7xi6qz.com1.z0.glb.clouddn.com/YIIsudu.jpg">

    
    <link rel="alternative" href="/atom.xml" title="DaiJiale&#39;s Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="DaiJiale&#39;s Blog" title="DaiJiale&#39;s Blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="DaiJiale&#39;s Blog">DaiJiale&#39;s Blog</a></h1>
				<h2 class="blog-motto">只有汗水不会欺骗你 || Only sweat will not fail you</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">关于我</a></li>
					
						<li><a href="/cool-sites">酷站分享</a></li>
					
					<li>
 					
						<form class="search" action="http://zhannei.baidu.com/cse/search" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value= null ><input type="text" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/09/29/【PHP】高级特性以及设计模式归纳/" title="【PHP】高级特性以及设计模式归纳" itemprop="url">【PHP】高级特性以及设计模式归纳</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Jiale Dai" target="_blank" itemprop="author">Jiale Dai</a>
		
  <p class="article-time">
    <time datetime="2016-09-29T07:33:11.000Z" itemprop="datePublished"> 发表于 2016-09-29</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#PSR"><span class="toc-number">1.</span> <span class="toc-text">PSR</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#PSR-0_自动加载"><span class="toc-number">1.1.</span> <span class="toc-text">PSR-0 自动加载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#开发符合PSR-0规范的基础框架"><span class="toc-number">1.1.1.</span> <span class="toc-text">开发符合PSR-0规范的基础框架</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PSR-1_基本代码规范"><span class="toc-number">1.2.</span> <span class="toc-text">PSR-1 基本代码规范</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PSR-2_代码样式"><span class="toc-number">1.3.</span> <span class="toc-text">PSR-2 代码样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PSR-3_日志接口"><span class="toc-number">1.4.</span> <span class="toc-text">PSR-3 日志接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PSR-4_自动加载升级版"><span class="toc-number">1.5.</span> <span class="toc-text">PSR-4 自动加载升级版</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SPL"><span class="toc-number">2.</span> <span class="toc-text">SPL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SPL（PHP标准库）"><span class="toc-number">2.1.</span> <span class="toc-text">SPL（PHP标准库）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Eg"><span class="toc-number">2.1.1.</span> <span class="toc-text">Eg</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#PHP链式操作"><span class="toc-number">3.</span> <span class="toc-text">PHP链式操作</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#PHP魔术方法"><span class="toc-number">4.</span> <span class="toc-text">PHP魔术方法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#__get/__set"><span class="toc-number">4.1.</span> <span class="toc-text">__get/__set</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#__call/__callStatic"><span class="toc-number">4.2.</span> <span class="toc-text">__call/__callStatic</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#__toString"><span class="toc-number">4.3.</span> <span class="toc-text">__toString</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#__invoke"><span class="toc-number">4.4.</span> <span class="toc-text">__invoke</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#工厂模式"><span class="toc-number">5.</span> <span class="toc-text">工厂模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#单例模式"><span class="toc-number">6.</span> <span class="toc-text">单例模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#注册器模式"><span class="toc-number">7.</span> <span class="toc-text">注册器模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#适配器模式"><span class="toc-number">8.</span> <span class="toc-text">适配器模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#策略模式"><span class="toc-number">9.</span> <span class="toc-text">策略模式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#控制反转(IOC)，依赖注入（DI）"><span class="toc-number">9.1.</span> <span class="toc-text">控制反转(IOC)，依赖注入（DI）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#数据对象映射模式（ORM）"><span class="toc-number">10.</span> <span class="toc-text">数据对象映射模式（ORM）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#观察者模式"><span class="toc-number">11.</span> <span class="toc-text">观察者模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#原型模式"><span class="toc-number">12.</span> <span class="toc-text">原型模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#装饰器模式"><span class="toc-number">13.</span> <span class="toc-text">装饰器模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#迭代器模式"><span class="toc-number">14.</span> <span class="toc-text">迭代器模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#代理模式"><span class="toc-number">15.</span> <span class="toc-text">代理模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#面向对象编程的基本原则"><span class="toc-number">16.</span> <span class="toc-text">面向对象编程的基本原则</span></a></li></ol>
		
		</div>
		
		<blockquote>
<p>PS：之前在和Mentor一起开发新项目时候，接触到了一些很经典的PHP设计模式和高级特性，通过项目沉淀和业余时间的学习，想对常用设计模式进行一个归纳，进行新知识的梳理，方便服务于未来更大型的后端项目，以及帮助更多的PHPer上路。</p>
</blockquote>
<a id="more"></a>
<h1 id="PSR">PSR</h1><p>FIG制定的PHP规范，简称PSR，是PHP开发的事实标准，现在主流的PHP框架：symfony、laravel、yii、thinkphp、百度odp等都严格遵守这个规范。</p>
<h2 id="PSR-0_自动加载">PSR-0 自动加载</h2><ul>
<li>命名空间必须与绝对路径一致。</li>
<li>类名首字母必须大写。</li>
<li>除入口文件外，其他”.php”必须只有一个类。</li>
</ul>
<h3 id="开发符合PSR-0规范的基础框架">开发符合PSR-0规范的基础框架</h3><ul>
<li>严格全部使用命名空间。</li>
<li>所有PHP文件必须自动载入，不能有include/require。</li>
<li>单一入口。</li>
</ul>
<h2 id="PSR-1_基本代码规范">PSR-1 基本代码规范</h2><p><a href="https://segmentfault.com/a/1190000002521577" target="_blank" rel="external">PSR-1规范详细介绍</a></p>
<h2 id="PSR-2_代码样式">PSR-2 代码样式</h2><p><a href="https://my.oschina.net/u/1420250/blog/193971" target="_blank" rel="external">PSR-2代码样式详细介绍</a></p>
<h2 id="PSR-3_日志接口">PSR-3 日志接口</h2><p><a href="https://segmentfault.com/a/1190000002521644" target="_blank" rel="external">PSR-3日志接口详细介绍</a></p>
<h2 id="PSR-4_自动加载升级版">PSR-4 自动加载升级版</h2><p><a href="https://segmentfault.com/a/1190000000380008" target="_blank" rel="external">PSR-4 PHP规范</a></p>
<h1 id="SPL">SPL</h1><h2 id="SPL（PHP标准库）">SPL（PHP标准库）</h2><ul>
<li>SqlStack，SqlQueue，SplHeap，SqlFixedArray等数据结构类。</li>
<li>ArrayIterator、AppendIterator、Countable、ArrayObject。</li>
<li>SPL提供的函数。</li>
</ul>
<h3 id="Eg">Eg</h3><p><img src="http://7xi6qz.com1.z0.glb.clouddn.com/YIIsudu.jpg" alt=""></p>
<p><code>YII</code>之所以能成为最快的PHP框架，源于使用了<code>SPL</code>提供的<code>LazyLoading</code>技术，即：vendor/yiisoft/yii2/Yii.php中<code>sql_autoload_register</code>的使用，例如：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">my_loader</span><span class="params">($class)</span></span>&#123;</span><br><span class="line">	<span class="keyword">require</span>(<span class="string">'class\\'</span>.$class.<span class="string">'.php'</span>);<span class="comment">//对象new时候发现未定义，会自动到指定目录下加载对应对象</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">spl_autoload_register(<span class="string">'my_loader'</span>);</span><br><span class="line"></span><br><span class="line">$is_girl = $_GET[<span class="string">'sex'</span>] == <span class="number">0</span> ? <span class="keyword">true</span> : <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>($is_girl)&#123;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'this is a girl'</span>;</span><br><span class="line">	$class1 = <span class="keyword">new</span> Class1;<span class="comment">//未定义对象，不会报错，会反向调用my_loader去加载对象</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'not a girl'</span>;</span><br><span class="line">	$class2 = <span class="keyword">new</span> Class2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>PS：想深入了解SPL标准库的话，这里有一篇<a href="http://www.ruanyifeng.com/blog/" target="_blank" rel="external">一峰</a>前辈的博文<a href="http://www.ruanyifeng.com/blog/2008/07/php_spl_notes.html" target="_blank" rel="external">SPL笔记</a>，国内应该找不到比这更好的中文参考文献了，同时我自己也整理了一篇关于SPL的博文，有兴趣的同学也可以看一看：<a href="">传送门</a>。</p>
<h1 id="PHP链式操作">PHP链式操作</h1><p><strong>eg:</strong> $db -&gt;where()-&gt;limit()-&gt;order();</p>
<p>不过多解释了，天天用的。</p>
<h1 id="PHP魔术方法">PHP魔术方法</h1><h2 id="__get/__set"><code>__get/__set</code></h2><p> 常用于类的构造方法，当对象的属性不存在时，将自动调用<code>__set</code>初始化属性，<code>__get</code>返回对象初始化属性。</p>
<h2 id="__call/__callStatic"><code>__call/__callStatic</code></h2><p> 常用于类的构造方法，当对象的方法不存在时，将自动回调<code>__call</code>初始化方法，<code>__callStatic</code>针对静态方法。</p>
<h2 id="__toString"><code>__toString</code></h2><p> 将对象转换成字符串类型。</p>
<h2 id="__invoke"><code>__invoke</code></h2><p>把对象当成函数去使用，则自动回调<code>__invoke</code>方法，返回对象传入的参数。</p>
<h1 id="工厂模式">工厂模式</h1><p>工厂模式的最大优点在于创建对象上面，就是把创建对象的过程封装起来，这样随时可以产生一个新的对象。<br>减少代码进行复制粘帖，耦合关系重，牵一发动其他部分代码。</p>
<p>通俗的说，以前创建一个对象要使用new，现在把这个过程封装起来了。<br>假设不使用工厂模式：那么很多地方调用类a，代码就会这样子创建一个实例：new a(),假设某天需要把a类的名称修改，意味着很多调用的代码都要修改。</p>
<p>工厂模式的优点就在创建对象上。<br>工厂模式的优点就在创建对象上。建立一个工厂（一个函数或一个类方法）来制造新的对象,它的任务就是把对象的创建过程都封装起来，<br>创建对象不是使用new的形式了。而是定义一个方法，用于创建对象实例。</p>
<p>每个类可能会需要连接数据库。那么就将连接数据库封装在一个类中。以后在其他类中通过类名:</p>
<p>为什么引入抽象的概念？<br>想一想，在现实生活中，当我们无法确定某个具体的东西的时候，往往把一类东西归于抽象类别。<br>工厂方法：<br>比如你的工厂叫做“香烟工厂”，那么可以有“七匹狼工厂”“中华工厂”等，但是，这个工厂只生厂一种商品：香烟；<br>抽象工厂：无法描述它到底生产什么产品，它生产很多类型的产品(所以抽象工厂就会生成子工厂)。<br>你的工厂是综合型的，是生产“一系列”产品，而不是“一个”，比如：生产“香烟”，还有“啤酒”等。然后它也可以有派生出来的具体的工厂，但这些工厂都是生产这一系列产品，只是可能因为地域不一样，为了适应当地人口味，味道也不太一样。<br>工厂模式：理解成只生成一种产品的工厂。比如生产香烟的。<br>工厂方法：工厂的一种产品生产线 。比如键盘的生成过程。</p>
<p>别人会反驳：吃饱了没事干，一定要修改类名称呢？这个说不定。一般都不会去修改类名称。</p>
<p>其实工厂模式有很多变体，抓住精髓才是关键：只要是可以根据不同的参数生成不同的类实例，那么就符合工厂模式的设计思想。</p>
<h1 id="单例模式">单例模式</h1><p>单例模式的要点有三个：</p>
<p>一是某个类只能有一个实例；</p>
<p>二是它必须自行创建这个实例；</p>
<p>三是它必须自行向整个系统提供这个实例。</p>
<p>下面我们讨论下为什么要使用PHP单例模式？</p>
<p>多数人都是从单例模式的字面上的意思来理解它的用途, 认为这是对系统资源的节省, 可以避免重复实例化, 是一种”计划生育”. 而PHP每次执行完页面都是会从内存中清理掉所有的资源. 因而PHP中的单例实际每次运行都是需要重新实例化的, 这样就失去了单例重复实例化的意义了. 单单从这个方面来说, PHP的单例的确有点让各位失望. 但是单例仅仅只有这个功能和应用吗? 答案是否定的,我们一起来看看。</p>
<ol>
<li><p>php的应用主要在于数据库应用, 所以一个应用中会存在大量的数据库操作, 在使用面向对象的方式开发时(废话), 如果使用单例模式, 则可以避免大量的new 操作消耗的资源。</p>
</li>
<li><p>如果系统中需要有一个类来全局控制某些配置信息, 那么使用单例模式可以很方便的实现. 这个可以参看zend Framework的FrontController部分。</p>
</li>
<li><p>在一次页面请求中, 便于进行调试, 因为所有的代码(例如数据库操作类db)都集中在一个类中, 我们可以在类中设置钩子, 输出日志，从而避免到处var_dump, echo。</p>
</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EasyFramework_Easy_Mysql</span></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> $_instance = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">self</span>::$_instance === <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">self</span>::$_instance = <span class="keyword">new</span> <span class="keyword">self</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>::$_instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">__clone</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">$x = EasyFramework_Easy_Mysql::getInstance();</span><br><span class="line">var_dump($x);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span><br><span class="line"> * 1.第一步：</span><br><span class="line"> * 既然是单例，也就是只能实例化一次，也就代表在实例化时</span><br><span class="line"> * 不可能使用new关键字！！！！</span><br><span class="line"> * 在使用new关键字时，类中的构造函数将自动调用。</span><br><span class="line"> * 但是，如果我们将构造函数的访问控制符设置为protected或private</span><br><span class="line"> * 那么就不可能直接使用new关键字了！！！</span><br><span class="line"> * 第二步：</span><br><span class="line"> * 无论protected/private修饰的属性或方法，请问在当前类的</span><br><span class="line"> * 内部是否可以访问？---&gt; 可以</span><br><span class="line"> * 第三步：</span><br><span class="line"> * 现在我们根本没有办法得到对象（因为你不能使用new关键字了），</span><br><span class="line"> * 第四步：静态成员(包括属性或方法)在访问时，只能通过</span><br><span class="line"> * 类名称::属性()</span><br><span class="line"> * 类名称::方法()</span><br><span class="line"> * 第五步：如果我现在存在一个静态方法--&gt; getInstance()</span><br><span class="line"> * 那么在调用时就应写成</span><br><span class="line"> * $object = EasyFramework_Easy_Mysql::getInstance()</span><br><span class="line"> * 如果，getInstance()方法可以得到唯一的一个对象</span><br><span class="line"> * 也就代表是所谓的单例模式了！！！</span><br><span class="line"> * 第六步，怎么让getInstace()只得到一个对象呢？</span><br><span class="line"> * 既然要得到对象，那么肯定是：</span><br><span class="line"> * $variabl = new ????();</span><br><span class="line"> * 我们又知道静态属性的值是可以所有的对象来继承的！！！</span><br><span class="line"> * 静态成员是属于类的，而非对象的！</span><br><span class="line"> * 所以</span><br><span class="line"> * 第七步：声明一个静态的属性，用其存储实例化的对象</span><br><span class="line"> * protectd static $_instance</span><br><span class="line"> *</span><br><span class="line"> * 并且初始值为null</span><br><span class="line"> * 那么我在调用getInstance()方法时，只需要判断其值是否为空即可\</span><br><span class="line"> *</span><br><span class="line"> * public static function getInstance()&#123;</span><br><span class="line"> *     if(self::_instance === null)&#123;</span><br><span class="line"> *      self::_instance = new self();</span><br><span class="line"> *  &#125;</span><br><span class="line"> *  return self::_instance;</span><br><span class="line"> * &#125;</span><br><span class="line"> * 在实例时，一定是这样写：</span><br><span class="line"> * $x = EasyFramework_Easy_Mysql::getInstance();</span><br><span class="line"> * 在第一时调用时,类的$_instance这个静态属性值为null,</span><br><span class="line"> * 那么也就代表,getInstance()方法的判断条件为真了，</span><br><span class="line"> * 也就意味着</span><br><span class="line"> * self::$_instance这个成员有了值了！！！</span><br><span class="line"> * 并且还返回这个值</span><br><span class="line"> * $y = EasyFramework_Easy_Mysql::getInstance();</span><br><span class="line"> * 在第二次或第N次调用时，self::$_instance已经有了值了</span><br><span class="line"> * 也就代表getInstance()方法的条件为假了！！！</span><br><span class="line"> * 也就代表其中的程序代表不可能执行了！！！</span><br><span class="line"> * 也就代表将直接返回以前的值了！！！</span><br><span class="line"> */</span></span><br></pre></td></tr></table></figure>
<h1 id="注册器模式">注册器模式</h1><p>单例模式解决的是如何在整个项目中创建唯一对象实例的问题，工厂模式解决的是如何不通过new建立实例对象的方法。 那么注册树模式想解决什么问题呢？ 在考虑这个问题前，我们还是有必要考虑下前两种模式目前面临的局限。 首先，单例模式创建唯一对象的过程本身还有一种判断，即判断对象是否存在。存在则返回对象，不存在则创建对象并返回。 每次创建实例对象都要存在这么一层判断。 工厂模式更多考虑的是扩展维护的问题。 总的来说，单例模式和工厂模式可以产生更加合理的对象。怎么方便调用这些对象呢？而且在项目内如此建立的对象好像散兵游勇一样，不便统筹管理安排埃因而，注册树模式应运而生。不管你是通过单例模式还是工厂模式还是二者结合生成的对象，都统统给我“插到”注册树上。我用某个对象的时候，直接从注册树上取一下就好。这和我们使用全局变量一样的方便实用。 而且注册树模式还为其他模式提供了一种非常好的想法。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Register</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">static</span> $objects;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">set</span><span class="params">($alias,$object)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">self</span>::$objects[$alias]=$object;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">get</span><span class="params">($alias)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">self</span>::$objects[$alias];</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">_unset</span><span class="params">($alias)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">unset</span>(<span class="keyword">self</span>::$objects[$alias]);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Register::set(<span class="string">'rand'</span>,RandFactory::factory());</span><br><span class="line"></span><br><span class="line">$object=Register::get(<span class="string">'rand'</span>);</span><br></pre></td></tr></table></figure>
<h1 id="适配器模式">适配器模式</h1><ul>
<li>可以将截然不同的函数接口封装成统一的API。</li>
<li><p>实际应用举例，PHP的数据库操作有mysql、mysqli、pdo3种、可以用适配器模式统一成一致。类似的场景还有cache适配器，将memcache、redis、file、apc等不同的缓存函数，统一成一致。 </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//目标角色  </span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Target</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">simpleMethod1</span><span class="params">()</span></span>;  </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">simpleMethod2</span><span class="params">()</span></span>;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//源角色  </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Adaptee</span> </span>&#123;  </span><br><span class="line">      </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">simpleMethod1</span><span class="params">()</span></span>&#123;  </span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Adapter simpleMethod1'</span>.<span class="string">"&lt;br&gt;"</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//类适配器角色  </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Adapter</span> <span class="keyword">implements</span> <span class="title">Target</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">private</span> $adaptee;  </span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(Adaptee $adaptee)</span> </span>&#123;  </span><br><span class="line">        $this-&gt;adaptee = $adaptee;   </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">    <span class="comment">//委派调用Adaptee的sampleMethod1方法  </span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">simpleMethod1</span><span class="params">()</span></span>&#123;  </span><br><span class="line">        <span class="keyword">echo</span> $this-&gt;adaptee-&gt;simpleMethod1();  </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">simpleMethod2</span><span class="params">()</span></span>&#123;  </span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'Adapter simpleMethod2'</span>.<span class="string">"&lt;br&gt;"</span>;     </span><br><span class="line">    &#125;   </span><br><span class="line">      </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//客户端  </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;  </span><br><span class="line">      </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        $adaptee = <span class="keyword">new</span> Adaptee();  </span><br><span class="line">        $adapter = <span class="keyword">new</span> Adapter($adaptee);  </span><br><span class="line">        $adapter-&gt;simpleMethod1();  </span><br><span class="line">        $adapter-&gt;simpleMethod2();   </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">Client::main();</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="策略模式">策略模式</h1><ul>
<li>将一组特定的行为和算法封装成类，以适应某些特定的上下文环境，这种模式就是策略模式。</li>
<li>实际应用举例，假如一个电商网站系统，针对男性女性用户要各自跳转到不同的商品类目，并且所有广告位展示不同的广告。</li>
<li>实现Ioc，依赖倒置，控制反转。</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span>  </span><br><span class="line"><span class="comment">/** </span><br><span class="line">* 策略模式 </span><br><span class="line">* 定义一系列的算法,把每一个算法封装起来, 并且使它们可相互替换。本模式使得算法可独立于使用它的客户而变化 </span><br><span class="line">* </span><br><span class="line">*/</span>   </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">/** </span><br><span class="line">* 出行旅游 </span><br><span class="line">* </span><br><span class="line">*  </span><br><span class="line">*/</span>  </span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">TravelStrategy</span></span>&#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">travelAlgorithm</span><span class="params">()</span></span>;  </span><br><span class="line">&#125;   </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">/** </span><br><span class="line"> * 具体策略类(ConcreteStrategy)1：乘坐飞机 </span><br><span class="line"> */</span>  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AirPlanelStrategy</span> <span class="keyword">implements</span> <span class="title">TravelStrategy</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">travelAlgorithm</span><span class="params">()</span></span>&#123;  </span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"travel by AirPlain"</span>, <span class="string">"&lt;BR&gt;\r\n"</span>;   </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;   </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">/** </span><br><span class="line"> * 具体策略类(ConcreteStrategy)2：乘坐火车 </span><br><span class="line"> */</span>  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TrainStrategy</span> <span class="keyword">implements</span> <span class="title">TravelStrategy</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">travelAlgorithm</span><span class="params">()</span></span>&#123;  </span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"travel by Train"</span>, <span class="string">"&lt;BR&gt;\r\n"</span>;   </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;   </span><br><span class="line">  </span><br><span class="line"><span class="comment">/** </span><br><span class="line"> * 具体策略类(ConcreteStrategy)3：骑自行车 </span><br><span class="line"> */</span>  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BicycleStrategy</span> <span class="keyword">implements</span> <span class="title">TravelStrategy</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">travelAlgorithm</span><span class="params">()</span></span>&#123;  </span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"travel by Bicycle"</span>, <span class="string">"&lt;BR&gt;\r\n"</span>;   </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;   </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">/** </span><br><span class="line"> *  </span><br><span class="line"> * 环境类(Context):用一个ConcreteStrategy对象来配置。维护一个对Strategy对象的引用。可定义一个接口来让Strategy访问它的数据。 </span><br><span class="line"> * 算法解决类，以提供客户选择使用何种解决方案： </span><br><span class="line"> */</span></span><br><span class="line">   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PersonContext</span></span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> $_strategy = <span class="keyword">null</span>;  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(TravelStrategy $travel)</span></span>&#123;  </span><br><span class="line">        $this-&gt;_strategy = $travel;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="comment">/** </span><br><span class="line">    * 旅行 </span><br><span class="line">    */</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setTravelStrategy</span><span class="params">(TravelStrategy $travel)</span></span>&#123;  </span><br><span class="line">        $this-&gt;_strategy = $travel;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="comment">/** </span><br><span class="line">    * 旅行 </span><br><span class="line">    */</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">travel</span><span class="params">()</span></span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> $this-&gt;_strategy -&gt;travelAlgorithm();  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;   </span><br><span class="line">  </span><br><span class="line"><span class="comment">// 乘坐火车旅行  </span></span><br><span class="line">$person = <span class="keyword">new</span> PersonContext(<span class="keyword">new</span> TrainStrategy());  </span><br><span class="line">$person-&gt;travel();  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// 改骑自行车  </span></span><br><span class="line">$person-&gt;setTravelStrategy(<span class="keyword">new</span> BicycleStrategy());  </span><br><span class="line">$person-&gt;travel();  </span><br><span class="line">  </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="控制反转(IOC)，依赖注入（DI）">控制反转(IOC)，依赖注入（DI）</h2><p>eg：<a href="https://my.oschina.net/cxz001/blog/533166" target="_blank" rel="external">谈谈PHP实现依赖注入(控制反转)</a></p>
<h1 id="数据对象映射模式（ORM）">数据对象映射模式（ORM）</h1><ul>
<li>数据对象映射模式，是将对象和数据存储映射起来，对一个对象的操作会映射为对数据存储的操作。</li>
<li>在代码中实现数据对象映射模式，我们将实现一个ORM类，将复杂的SQL语句映射成对象属性的操作。</li>
<li>结合使用数据对象映射模式，工厂模式，注册模式。</li>
</ul>
<h1 id="观察者模式">观察者模式</h1><ul>
<li>观察者模式（Observer），当一个对象状态发生改变时，依赖它的对象全部会收到通知，并自动更新。</li>
<li>场景：一个事件发生后，要执行一连串更新操作。传统的编程方法，就是在事件的代码之后直接加入处理逻辑。当更新的逻辑增多之后，代码会变得难以维护。这种方式是耦合的，侵入式的，增加新的逻辑需要修改事件主体的代码。</li>
<li>观察者模式实现了低耦合，非侵入式的通知与更新机制。</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 观察者模式</span><br><span class="line"> * <span class="doctag">@author</span>: Mac</span><br><span class="line"> * <span class="doctag">@date</span>: 2012/02/22</span><br><span class="line"> */</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Paper</span></span>&#123; </span><br><span class="line">	<span class="comment">/* 主题    */</span></span><br><span class="line">    <span class="keyword">private</span> $_observers = <span class="keyword">array</span>();</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">register</span><span class="params">($sub)</span></span>&#123; <span class="comment">/*  注册观察者 */</span></span><br><span class="line">        $this-&gt;_observers[] = $sub;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">     </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">trigger</span><span class="params">()</span></span>&#123;  <span class="comment">/*  外部统一访问    */</span></span><br><span class="line">        <span class="keyword">if</span>(!<span class="keyword">empty</span>($this-&gt;_observers))&#123;</span><br><span class="line">            <span class="keyword">foreach</span>($this-&gt;_observers <span class="keyword">as</span> $observer)&#123;</span><br><span class="line">                $observer-&gt;update();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 观察者要实现的接口</span><br><span class="line"> */</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Observerable</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">update</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subscriber</span> <span class="keyword">implements</span> <span class="title">Observerable</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">update</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Callback\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">下面是测试代码</span><br><span class="line"></span><br><span class="line"><span class="comment">/*  测试    */</span></span><br><span class="line">$paper = <span class="keyword">new</span> Paper();</span><br><span class="line">$paper-&gt;register(<span class="keyword">new</span> Subscriber());</span><br><span class="line"><span class="comment">//$paper-&gt;register(new Subscriber1());</span></span><br><span class="line"><span class="comment">//$paper-&gt;register(new Subscriber2());</span></span><br><span class="line">$paper-&gt;trigger();</span><br></pre></td></tr></table></figure>
<h1 id="原型模式">原型模式</h1><ul>
<li>与工厂模式作用类似，都是用来创建对象的。</li>
<li>与工厂模式的实现不同，原型模式是先创建好一个原型对象，然后通过clone原型对象来创建新的对象。这样就免去了类创建时重复的初始化操作。</li>
<li>原型模式适用于大对象的创建，创建一个大对象需要很大的开销，如果每次new就会消耗很大，原型模式仅需内存拷贝即可。</li>
</ul>
<h1 id="装饰器模式">装饰器模式</h1><ul>
<li>装饰器模式（Decorator），可以动态地添加修改类的功能。</li>
<li>一个类提供了一项功能，如果要在修改并增加额外的功能，传统的编程模式，需要写一个子类继承它，并重新实现类的方法。</li>
<li>使用装饰器模式，仅仅需在运行时添加一个装饰器对象即可实现，可以实现最大的灵活性。</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Beverage</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> $_name;</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">Cost</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 被装饰者类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Coffee</span> <span class="keyword">extends</span> <span class="title">Beverage</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span>&#123;</span><br><span class="line">        $this-&gt;_name = <span class="string">'Coffee'</span>;</span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">Cost</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1.00</span>;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 以下三个类是装饰者相关类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CondimentDecorator</span> <span class="keyword">extends</span> <span class="title">Beverage</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span>&#123;</span><br><span class="line">        $this-&gt;_name = <span class="string">'Condiment'</span>;</span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">Cost</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0.1</span>;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Milk</span> <span class="keyword">extends</span> <span class="title">CondimentDecorator</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> $_beverage;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($beverage)</span></span>&#123;</span><br><span class="line">        $this-&gt;_name = <span class="string">'Milk'</span>;</span><br><span class="line">        <span class="keyword">if</span>($beverage <span class="keyword">instanceof</span> Beverage)&#123;</span><br><span class="line">            $this-&gt;_beverage = $beverage;</span><br><span class="line">        &#125;<span class="keyword">else</span></span><br><span class="line">            <span class="keyword">exit</span>(<span class="string">'Failure'</span>);</span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">Cost</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> $this-&gt;_beverage-&gt;Cost() + <span class="number">0.2</span>;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sugar</span> <span class="keyword">extends</span> <span class="title">CondimentDecorator</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> $_beverage;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($beverage)</span></span>&#123;</span><br><span class="line">        $this-&gt;_name = <span class="string">'Sugar'</span>;</span><br><span class="line">        <span class="keyword">if</span>($beverage <span class="keyword">instanceof</span> Beverage)&#123;</span><br><span class="line">            $this-&gt;_beverage = $beverage;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">exit</span>(<span class="string">'Failure'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">Cost</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> $this-&gt;_beverage-&gt;Cost() + <span class="number">0.2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// Test Case</span></span><br><span class="line"><span class="comment">//1.拿杯咖啡</span></span><br><span class="line">$coffee = <span class="keyword">new</span> Coffee();</span><br><span class="line"> </span><br><span class="line"><span class="comment">//2.加点牛奶</span></span><br><span class="line">$coffee = <span class="keyword">new</span> Milk($coffee);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//3.加点糖</span></span><br><span class="line">$coffee = <span class="keyword">new</span> Sugar($coffee);</span><br><span class="line"> </span><br><span class="line">printf(<span class="string">"Coffee Total:%0.2f元\n"</span>,$coffee-&gt;Cost());</span><br></pre></td></tr></table></figure>
<h1 id="迭代器模式">迭代器模式</h1><ul>
<li>迭代器模式，在不需要了解内部实现的前提下，遍历一个聚合对象的内部元素。</li>
<li>相比于传统的编程模式，迭代器模式可以隐藏遍历元素的所需的操作。</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span>  </span><br><span class="line"><span class="comment">/** </span><br><span class="line"> * Created by PhpStorm. </span><br><span class="line"> * User: Jiang </span><br><span class="line"> * Date: 2015/6/8 </span><br><span class="line"> * Time: 21:31 </span><br><span class="line"> */</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//抽象迭代器  </span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">IIterator</span>  </span><br><span class="line"></span>&#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">function</span> <span class="title">First</span><span class="params">()</span></span>;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">function</span> <span class="title">Next</span><span class="params">()</span></span>;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">function</span> <span class="title">IsDone</span><span class="params">()</span></span>;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">function</span> <span class="title">CurrentItem</span><span class="params">()</span></span>;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//具体迭代器  </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteIterator</span> <span class="keyword">extends</span> <span class="title">IIterator</span>  </span><br><span class="line"></span>&#123;  </span><br><span class="line">    <span class="keyword">private</span> $aggre;  </span><br><span class="line">    <span class="keyword">private</span> $current = <span class="number">0</span>;  </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(array $_aggre)</span>  </span><br><span class="line">    </span>&#123;  </span><br><span class="line">        $this-&gt;aggre = $_aggre;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="comment">//返回第一个  </span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">First</span><span class="params">()</span>  </span><br><span class="line">    </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> $this-&gt;aggre[<span class="number">0</span>];  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">//返回下一个  </span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span>  <span class="title">Next</span><span class="params">()</span>  </span><br><span class="line">    </span>&#123;  </span><br><span class="line">        $this-&gt;current++;  </span><br><span class="line">        <span class="keyword">if</span>($this-&gt;current&lt;count($this-&gt;aggre))  </span><br><span class="line">        &#123;  </span><br><span class="line">            <span class="keyword">return</span> $this-&gt;aggre[$this-&gt;current];  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">//返回是否IsDone  </span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">IsDone</span><span class="params">()</span>  </span><br><span class="line">    </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> $this-&gt;current&gt;=count($this-&gt;aggre)?<span class="keyword">true</span>:<span class="keyword">false</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">//返回当前聚集对象  </span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">CurrentItem</span><span class="params">()</span>  </span><br><span class="line">    </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> $this-&gt;aggre[$this-&gt;current];  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//客户端调用</span></span><br><span class="line"></span><br><span class="line">header(<span class="string">"Content-Type:text/html;charset=utf-8"</span>);  </span><br><span class="line"><span class="comment">//--------------------------迭代器模式-------------------  </span></span><br><span class="line"><span class="keyword">require_once</span> <span class="string">"./Iterator/Iterator.php"</span>;  </span><br><span class="line">$iterator= <span class="keyword">new</span> ConcreteIterator(<span class="keyword">array</span>(<span class="string">'周杰伦'</span>,<span class="string">'王菲'</span>,<span class="string">'周润发'</span>));  </span><br><span class="line">$item = $iterator-&gt;First();  </span><br><span class="line"><span class="keyword">echo</span> $item.<span class="string">"&lt;br/&gt;"</span>;  </span><br><span class="line"><span class="keyword">while</span>(!$iterator-&gt;IsDone())  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&#123;$iterator-&gt;CurrentItem()&#125;：请买票！&lt;br/&gt;"</span>;  </span><br><span class="line">    $iterator-&gt;Next();  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="代理模式">代理模式</h1><ul>
<li><p>在客户端与实体之间建立一个代理对象（proxy），客户端对实体进行操作全部委派给代理对象，隐藏实体的具体实现细节。</p>
</li>
<li><p>Proxy还可以与业务代码分离，部署到另外的服务器，业务代码中通过RPC来委派任务。</p>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Printer</span> </span>&#123;   <span class="comment">//代理对象,一台打印机</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">printSth</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      	 <span class="keyword">echo</span> <span class="string">'I can print &lt;br&gt;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">                </span><br><span class="line">    <span class="comment">// some more function below</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line">             </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TextShop</span> </span>&#123;    <span class="comment">//这是一个文印处理店,只文印,卖纸,不照相</span></span><br><span class="line">	<span class="keyword">private</span> $printer;</span><br><span class="line">                </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(Printer $printer)</span> </span>&#123;</span><br><span class="line">         $this-&gt;printer = $printer;</span><br><span class="line">    &#125;</span><br><span class="line">                </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sellPaper</span><span class="params">()</span> </span>&#123;    <span class="comment">//卖纸</span></span><br><span class="line">          <span class="keyword">echo</span> <span class="string">'give you some paper &lt;br&gt;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">                </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__call</span><span class="params">($method, $args)</span> </span>&#123;    <span class="comment">//将代理对象有的功能交给代理对象处理</span></span><br><span class="line">         <span class="keyword">if</span>(method_exists($this-&gt;printer, $method)) &#123;</span><br><span class="line">            $this-&gt;printer-&gt;$method($args);</span><br><span class="line">         &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">             </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PhotoShop</span> </span>&#123;    <span class="comment">//这是一个照相店,只文印,拍照,不卖纸</span></span><br><span class="line">      <span class="keyword">private</span> $printer;</span><br><span class="line">                </span><br><span class="line">      <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(Printer $printer)</span> </span>&#123;</span><br><span class="line">           $this-&gt;printer = $printer;</span><br><span class="line">      &#125;</span><br><span class="line">                </span><br><span class="line">      <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">takePhotos</span><span class="params">()</span> </span>&#123;    <span class="comment">//照相</span></span><br><span class="line">           <span class="keyword">echo</span> <span class="string">'take photos for you &lt;br&gt;'</span>;</span><br><span class="line">      &#125;</span><br><span class="line">                </span><br><span class="line">      <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__call</span><span class="params">($method, $args)</span> </span>&#123;    <span class="comment">//将代理对象有的功能交给代理对象处理</span></span><br><span class="line">           <span class="keyword">if</span>(method_exists($this-&gt;printer, $method)) &#123;</span><br><span class="line">               $this-&gt;printer-&gt;$method($args);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br><span class="line">            </span><br><span class="line">     $printer = <span class="keyword">new</span> Printer();</span><br><span class="line">     $textShop = <span class="keyword">new</span> TextShop($printer);</span><br><span class="line">     $photoShop = <span class="keyword">new</span> PhotoShop($printer);</span><br><span class="line">            </span><br><span class="line">     $textShop-&gt;printSth();</span><br><span class="line">     $photoShop-&gt;printSth();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="面向对象编程的基本原则">面向对象编程的基本原则</h1><ul>
<li>1.单一职责：一个类，只需要做好一件事情。</li>
<li>2.开放封闭：一个类，应该是可扩展的，而不可修改的。</li>
<li>3.依赖倒置：一个类，不应该强依赖另一个类，每个类对于另一个类都是可替换的。</li>
<li>4.配置化：尽可能地使用配置，而不是硬编码。</li>
<li>5.面向接口编程：只需要关心接口，不需要关心实现。</li>
</ul>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/原创博文/">原创博文</a>►<a class="article-category-link" href="/categories/原创博文/Web开发笔记/">Web开发笔记</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/PHP/">PHP</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://daijiale.github.io/2016/09/29/【PHP】高级特性以及设计模式归纳/" data-title="【PHP】高级特性以及设计模式归纳 | DaiJiale&#39;s Blog" data-tsina="3173290371" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2016/10/12/【云计算】CaaS laaS平台集成解决方案/" title="【Docker】CaaS、laaS平台集成解决方案">
  <strong>上一篇：</strong><br/>
  <span>
  【Docker】CaaS、laaS平台集成解决方案</span>
</a>
</div>


<div class="next">
<a href="/2016/08/08/【后端】https/"  title="【后端】HTTPS化">
 <strong>下一篇：</strong><br/> 
 <span>【后端】HTTPS化
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2016/09/29/【PHP】高级特性以及设计模式归纳/" data-title="【PHP】高级特性以及设计模式归纳" data-url="http://daijiale.github.io/2016/09/29/【PHP】高级特性以及设计模式归纳/"></div>
</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#PSR"><span class="toc-number">1.</span> <span class="toc-text">PSR</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#PSR-0_自动加载"><span class="toc-number">1.1.</span> <span class="toc-text">PSR-0 自动加载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#开发符合PSR-0规范的基础框架"><span class="toc-number">1.1.1.</span> <span class="toc-text">开发符合PSR-0规范的基础框架</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PSR-1_基本代码规范"><span class="toc-number">1.2.</span> <span class="toc-text">PSR-1 基本代码规范</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PSR-2_代码样式"><span class="toc-number">1.3.</span> <span class="toc-text">PSR-2 代码样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PSR-3_日志接口"><span class="toc-number">1.4.</span> <span class="toc-text">PSR-3 日志接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PSR-4_自动加载升级版"><span class="toc-number">1.5.</span> <span class="toc-text">PSR-4 自动加载升级版</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SPL"><span class="toc-number">2.</span> <span class="toc-text">SPL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SPL（PHP标准库）"><span class="toc-number">2.1.</span> <span class="toc-text">SPL（PHP标准库）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Eg"><span class="toc-number">2.1.1.</span> <span class="toc-text">Eg</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#PHP链式操作"><span class="toc-number">3.</span> <span class="toc-text">PHP链式操作</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#PHP魔术方法"><span class="toc-number">4.</span> <span class="toc-text">PHP魔术方法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#__get/__set"><span class="toc-number">4.1.</span> <span class="toc-text">__get/__set</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#__call/__callStatic"><span class="toc-number">4.2.</span> <span class="toc-text">__call/__callStatic</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#__toString"><span class="toc-number">4.3.</span> <span class="toc-text">__toString</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#__invoke"><span class="toc-number">4.4.</span> <span class="toc-text">__invoke</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#工厂模式"><span class="toc-number">5.</span> <span class="toc-text">工厂模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#单例模式"><span class="toc-number">6.</span> <span class="toc-text">单例模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#注册器模式"><span class="toc-number">7.</span> <span class="toc-text">注册器模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#适配器模式"><span class="toc-number">8.</span> <span class="toc-text">适配器模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#策略模式"><span class="toc-number">9.</span> <span class="toc-text">策略模式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#控制反转(IOC)，依赖注入（DI）"><span class="toc-number">9.1.</span> <span class="toc-text">控制反转(IOC)，依赖注入（DI）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#数据对象映射模式（ORM）"><span class="toc-number">10.</span> <span class="toc-text">数据对象映射模式（ORM）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#观察者模式"><span class="toc-number">11.</span> <span class="toc-text">观察者模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#原型模式"><span class="toc-number">12.</span> <span class="toc-text">原型模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#装饰器模式"><span class="toc-number">13.</span> <span class="toc-text">装饰器模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#迭代器模式"><span class="toc-number">14.</span> <span class="toc-text">迭代器模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#代理模式"><span class="toc-number">15.</span> <span class="toc-text">代理模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#面向对象编程的基本原则"><span class="toc-number">16.</span> <span class="toc-text">面向对象编程的基本原则</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/原创博文/Android开发笔记/" title="Android开发笔记">Android开发笔记<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/转载博文/Web开发分享/" title="Web开发分享">Web开发分享<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/原创博文/Web开发笔记/" title="Web开发笔记">Web开发笔记<sup>21</sup></a></li>
		  
		
		  
			<li><a href="/categories/原创博文/关于舞蹈/" title="关于舞蹈">关于舞蹈<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/原创博文/单反自学笔记/" title="单反自学笔记">单反自学笔记<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/原创博文/" title="原创博文">原创博文<sup>34</sup></a></li>
		  
		
		  
			<li><a href="/categories/原创博文/自己的开源项目/" title="自己的开源项目">自己的开源项目<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/转载博文/" title="转载博文">转载博文<sup>4</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/PHP/" title="PHP">PHP<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/个人故事/" title="个人故事">个人故事<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/Android/" title="Android">Android<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Javascript/" title="Javascript">Javascript<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/Node-js/" title="Node.js">Node.js<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/数据库/" title="数据库">数据库<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Hackathon/" title="Hackathon">Hackathon<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Redis/" title="Redis">Redis<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/html5/" title="html5">html5<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/神经网络/" title="神经网络">神经网络<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/图像识别/" title="图像识别">图像识别<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/搜索引擎/" title="搜索引擎">搜索引擎<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Nutch/" title="Nutch">Nutch<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Tesseract/" title="Tesseract">Tesseract<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Solr/" title="Solr">Solr<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/OCR/" title="OCR">OCR<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/AndroidWear/" title="AndroidWear">AndroidWear<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/智能可穿戴/" title="智能可穿戴">智能可穿戴<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/正则表达式/" title="正则表达式">正则表达式<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/程序猿素养/" title="程序猿素养">程序猿素养<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://www.daijiale.cn" target="_blank" title="DaiJiale的个人简历页">DaiJiale的个人站点</a>
            
          </li>
        
          <li>
            
            	<a href="http://c2pblog.sinaapp.com/" target="_blank" title="Baiduer刘神的Blog">LiuKaiNing的Blog</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.linzhihao.cn" target="_blank" title="我师父的Blog">MasterLin的Blog</a>
            
          </li>
        
          <li>
            
            	<a href="http://charles-xiao.github.io/" target="_blank" title="好友肖勇Blog">CharlesXiao的Blog</a>
            
          </li>
        
          <li>
            
            	<a href="http://lizhuolun.com/" target="_blank" title="好友卓伦Blog">lizhuolun的Blog</a>
            
          </li>
        
          <li>
            
            	<a href="http://leuisken.github.io/index.html" target="_blank" title="学弟嘉讯Blog">leuisken的Blog</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.php-note.com/" target="_blank" title="神一样的PHPer">钱途无梁的PHP-Note</a>
            
          </li>
        
          <li>
            
            	<a href="http://stormzhang.com/" target="_blank" title="偶像的Blog（Android_CN OG级人物）">StormZhang的Blog</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me/" target="_blank" title="jacman原创博主">Jark&#39;s Blog</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.developerclub.cn" target="_blank" title="博主自己独立开发的：一个面向电子科技大学开发者的网上社区">电子科技大学开发者俱乐部</a>
            
          </li>
        
          <li>
            
            	<a href="http://uestc.xyz" target="_blank" title="一个面向电子科技大学Linux开发者的社区">电子科技大学Linux开源社区</a>
            
          </li>
        
          <li>
            
            	<a href="http://blog.newstacksoft.com/" target="_blank" title="2016届百度新人交流社区贡献者">NewBaiduer2016社区</a>
            
          </li>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://tongji.cnzz.com/main.php?c=site&a=show&siteid=1254856612" target="_blank" title=" 站点数据统计">站长统计</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Jiale Dai in Baidu. <br/>
			Welcome To My World.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/3173290371" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/daijiale" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		<a href="https://www.zhihu.com/people/dai-jia-le-35" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		
		<a href="mailto:daijiale@daijiale.cn" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by Hexo and Theme Rebuilt From Jacman By</a> © 2016 
		
		<a href="http://www.daijiale.cn">Jiale Dai</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
        getSize();
        if (myWidth >= 1024) {
          c.click();
        }
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#nothing"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"daijiale"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1260094759'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1260094759%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
